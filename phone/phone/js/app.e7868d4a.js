(function(e){function t(t){for(var a,c,i=t[0],s=t[1],r=t[2],d=0,u=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&u.push(o[c][0]),o[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);h&&h(t);while(u.length)u.shift()();return l.push.apply(l,r||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==o[i]&&(a=!1)}a&&(l.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},c={app:0},o={app:0},l=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-206d2629":"93c1d138","chunk-39396829":"86ce5a29","chunk-641ae183":"a3eb0b4e","chunk-670cf2f4":"5a3aead2","chunk-ada79270":"6cc1067c","chunk-e013325c":"3b70dd7f"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-206d2629":1,"chunk-641ae183":1,"chunk-670cf2f4":1,"chunk-ada79270":1,"chunk-e013325c":1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-206d2629":"d7bf4264","chunk-39396829":"31d6cfe0","chunk-641ae183":"1336e7cb","chunk-670cf2f4":"57f0076b","chunk-ada79270":"0e4013b8","chunk-e013325c":"27695478"}[e]+".css",o=s.p+a,l=document.getElementsByTagName("link"),i=0;i<l.length;i++){var r=l[i],d=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(d===a||d===o))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){r=u[i],d=r.getAttribute("data-href");if(d===a||d===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||o,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.request=a,delete c[e],h.parentNode.removeChild(h),n(l)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){c[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var l=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=l);var r,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var u=new Error;r=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+c+")",u.name="ChunkLoadError",u.type=a,u.request=c,n[1](u)}o[e]=void 0}};var h=setTimeout((function(){r({type:"timeout",target:d})}),12e4);d.onerror=d.onload=r,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var h=d;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0058":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#FE384B",height:"100%","text-align":"center"},attrs:{id:"con"}},[e.callingTarget.code?a("div",{staticClass:"calling-dialog"},[a("p",{staticStyle:{"font-size":"32px",margin:"0"}},[e._v(e._s("与"+e.callingTarget.name+"通话中"))]),a("div",{staticClass:"calling-btn",on:{click:e.handleHangUp}},[e._v("挂断")])]):e._e(),a("img",{staticStyle:{width:"200px",height:"200px","margin-top":"200px"},attrs:{src:n("f7bb")}}),a("transition-group",{staticClass:"call-list",attrs:{name:"calling",tag:"ul"}},e._l(e.$store.state.bathCallList,(function(t){return a("li",{key:t,staticClass:"call-item",staticStyle:{"line-height":"57px"}},[e._v(e._s(t))])})),0)],1)},c=[],o={data:function(){return{callingTarget:{code:"",name:"医生办公室"}}},methods:{handleHangUp:function(){this.callingTarget={code:"",name:""}}}},l=o,i=(n("e716"),n("2877")),s=Object(i["a"])(l,a,c,!1,null,null,null);t["default"]=s.exports},"034f":function(e,t,n){"use strict";var a=n("85ec"),c=n.n(a);c.a},"0c39":function(e,t,n){"use strict";var a=n("c286"),c=n.n(a);c.a},4360:function(e,t,n){"use strict";n("c740"),n("c975"),n("a434");var a=n("5530"),c=n("2b0e"),o=n("2f62"),l=n("bc3a"),i=n.n(l),s=n("c1df"),r=n.n(s),d=new AudioContext;c["a"].use(o["a"]),t["a"]=new o["a"].Store({state:{currentTime:0,broadcastSelectedDevice:[],bindInfo:{hospitalName:"",areaName:"",name:""},deviceList:{chestList:[],bedList:[],doctorList:[],ipList:[]},currentCall:{calledCode:"",callerCode:"",channelId:"",targetName:""},recordList:[],bathCallList:[],noticeList:[],currentAudioSourceNode:null,called:!1},getters:{currentDate:function(e){return r()(e.currentTime).format("YYYY-MM-DD HH:mm")}},mutations:{updateTime:function(e,t){e.currentTime=t},pickupDevice:function(e,t){var n=e.broadcastSelectedDevice.indexOf(t);n<0?e.broadcastSelectedDevice.push(t):e.broadcastSelectedDevice.splice(n,1)},clearSelectedDevice:function(e){e.broadcastSelectedDevice=[]},bindOffice:function(e,t){e.bindInfo=t},getDeviceList:function(e,t){e.deviceList=t},phoneCall:function(e,t){e.currentCall=t},hangup:function(e){e.currentCall={calledCode:"",callerCode:"",channelId:"",targetName:""}},newPhoneCall:function(e,t){console.log("new phone call",t),e.noticeList.push(t)},recordPhoneCall:function(e,t){e.recordList.push(t)},handlePhoneCall:function(e){var t=e.noticeList.shift();e.recordList.push(Object(a["a"])(Object(a["a"])({},t),{},{handled:!0})),e.currentCall=t},unhandledPhoneCall:function(e,t){var n=e.noticeList.findIndex((function(e){return e.channelId===t}));if(n>=0){var c=e.noticeList.splice(n,1);e.recordList.push(Object(a["a"])(Object(a["a"])({},c),{},{handled:!1}))}},newBathCall:function(e,t){e.bathCallList.push(t)},handleBathCall:function(e){e.bathCallList.shift()},stopSound:function(e){console.log("stop","来了就是这里"),e.currentAudioSourceNode&&(e.currentAudioSourceNode.stop(),e.currentAudioSourceNode.disconnect())},changeAudioSourceNode:function(e,t){console.log("changeAudioSourceNode",t),e.currentAudioSourceNode&&(e.currentAudioSourceNode.stop(),e.currentAudioSourceNode.disconnect()),t&&(e.currentAudioSourceNode=d.createBufferSource(),e.currentAudioSourceNode.buffer=t,e.currentAudioSourceNode.connect(d.destination),e.currentAudioSourceNode.loop=!0,e.currentAudioSourceNode.start())}},actions:{playSound:function(e,t){var n=e.commit;console.log("play sound",t),i.a.get(t,{responseType:"arraybuffer",baseURL:""}).then((function(e){return e.data})).then((function(e){d.decodeAudioData(e,(function(e){n("changeAudioSourceNode",e)}))}))}},modules:{}})},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=o,e.exports=c,c.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("b0c0"),n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("5530"),c=n("15fd"),o=n("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view"),e.showConfigDialog?a("div",{staticClass:"config-dialog",on:{click:function(e){e.stopPropagation()}}},[a("div",{staticClass:"config-title"},[e._v("系统设置")]),a("div",{staticClass:"config-row",on:{click:function(t){return e.$router.push("/office")}}},[a("span",[e._v("修改绑定位置")]),a("span",[e._v(e._s(e.$store.state.bindInfo.name))]),a("img",{staticStyle:{position:"absolute",top:"32px",right:"30px"},attrs:{src:n("69f5")}})]),a("div",{staticClass:"config-row",on:{click:e.checkUpdate}},[a("span",[e._v("软件版本")]),a("span",[e._v(e._s(e.configInfo.version))]),a("img",{staticStyle:{position:"absolute",top:"32px",right:"30px"},attrs:{src:n("69f5")}})]),a("div",{staticClass:"config-row"},[a("span",[e._v("设备编码")]),a("span",[e._v(e._s(e.configInfo.mac))])]),a("div",{staticClass:"config-row",on:{click:e.exitApp}},[a("span",[e._v("退出应用")])])]):e._e()],1)},i=[],s=(n("a9e3"),n("ac1f"),n("5319"),n("fa7d")),r={data:function(){return{showConfigDialog:!1}},computed:{currentCall:function(){return this.$store.state.currentCall},noticeList:function(){return this.$store.state.noticeList},configInfo:function(){return{version:window.plus.getAppVersion&&window.plus.getAppVersion()||"未知",mac:window.plus.getMac()||"未知"}}},created:function(){var e=this;window.app=this,window.plus.registSocketListener();var t=window.plus.getSpStr("bindInfo")||"{}",n=JSON.parse(t);n.name?(this.$store.commit("bindOffice",n),this.$router.replace("/list/beds")):this.axios.post("device/bindcheck").then((function(t){1===t.data.code&&(e.$store.commit("bindOffice",t.data.data),t.data.data.name&&(window.plus.saveSpStr("bindInfo",JSON.stringify(t.data.data)),e.$router.replace("/list/beds")))}))},mounted:function(){var e=this;console.log("app mounted"),this.$eventBus.$off("call"),this.$eventBus.$on("open-config",(function(){console.log("open-config"),e.showConfigDialog=!0})),document.body.addEventListener("click",(function(){e.showConfigDialog=!1})),this.$eventBus.$on("call",(function(t){console.log(t),Object(s["c"])(t.deviceCode).then((function(n){e.$store.state.called=!1,window.plus.voice_call(n.channelId),e.$store.commit("phoneCall",{calledCode:n.deviceCode,callerCode:window.plus.getMac(),channelId:n.channelId,targetName:t.name}),e.$store.commit("recordPhoneCall",{calledCode:n.deviceCode,callerCode:window.plus.getMac(),channelId:n.channelId,targetName:t.name,handled:!0})})).catch((function(e){Object(s["e"])(e.message)}))})),window.app=this,this.axios.post("nursingStation/deviceList").then((function(t){1===t.data.code?e.$store.commit("getDeviceList",t.data.data):Object(s["e"])(t.data.msg)})).catch((function(){Object(s["e"])("网络异常，请检查您的网络。")})),setInterval((function(){e.axios.post("nursingStation/deviceList").then((function(t){1===t.data.code&&e.$store.commit("getDeviceList",t.data.data)}))}),3e5),this.axios.post("getTime").then((function(t){1===t.data.code&&(e.$store.commit("updateTime",Number(t.data.data.time)),window.plus.updateSysTime(Number(t.data.data.time)))})).finally((function(){var t=new Date(e.$store.state.currentTime);e.$store.commit("updateTime",t.getTime());var n=6e4-(1e3*t.getSeconds()+t.getMilliseconds());console.log(n,"134");var a=setTimeout((function(){clearTimeout(a),e.$store.commit("updateTime",e.$store.state.currentTime+n),setInterval((function(){e.$store.commit("updateTime",e.$store.state.currentTime+6e4)}),6e4)}),n)}))},methods:{exitApp:function(){window.plus.exitApp()},checkUpdate:function(){window.plus.checkAppVersion()},voice_callback:function(){var e=this;this.$inChannel=!0;var t=window.plus.getMac();this.$store.state.called?(window.plus.webSocket_sendMsg(JSON.stringify({code:"BACK",data:{calledCode:this.currentCall.calledCode,callerCode:this.currentCall.callerCode,channelId:this.currentCall.channelId,callStatus:"2"}})),this.$model.setOption({contentText:this.currentCall.targetName+"通话中...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){Object(s["b"])(t,e.currentCall.channelId).then(e.endPhoneCall).catch((function(e){Object(s["e"])(e.message)}))}}]})):Object(s["a"])(this.currentCall.calledCode,this.currentCall.channelId).then((function(t){var n=t.devCode,a=t.channelId;e.$model=Object(s["f"])({contentText:e.currentCall.targetName+"正在呼叫中...",buttons:[{text:"取消呼叫",callback:function(){Object(s["b"])(n,a).then(e.endPhoneCall).catch((function(e){Object(s["e"])(e.message)}))}}]})})).catch((function(t){e.$inChannel=!1,Object(s["e"])(t.message)}))},onSocketMessage:function(e){var t=this,n=JSON.parse(e);console.log(n);var c=window.plus.getMac();switch(n.code){case"CALL":switch(n.data.deviceType){case"1":"0"!==n.data.onoff?(this.currentCall.calledCode&&Object(s["b"])(window.plus.getMac(),this.currentCall.channelId).then(this.endPhoneCall).catch((function(e){Object(s["e"])(e.message)})),this.$eventBus.$off("call"),this.$store.commit("newBathCall",n.data.showMsg),window.plus.playTextToVoice(n.data.voiceMsg),this.$router.push("/bathcall"),this.$store.dispatch("playSound","/sound/voice.mp3")):(this.$store.commit("handleBathCall"),0===this.$store.state.bathCallList.length&&(this.$router.go(-1),this.$store.commit("stopSound")));break;default:"/bathCall"===this.$route.path&&window.plus.webSocket_sendMsg(JSON.stringify({code:"BACK",data:{callerCode:n.data.callerCode,calledCode:window.plus.getMac(),channelId:n.data.channelId,callStatus:"9"}})),console.log("current call",this.currentCall),this.currentCall.calledCode?this.$store.commit("newPhoneCall",{calledCode:window.plus.getMac(),callerCode:n.data.callerCode,channelId:n.data.channelId,targetName:n.data.showMsg}):(this.$store.commit("phoneCall",{calledCode:c,callerCode:n.data.callerCode,channelId:n.data.channelId,targetName:n.data.showMsg}),window.plus.playTextToVoice(n.data.voiceMsg),this.$store.dispatch("playSound","/sound/ring.wav"),this.$model=Object(s["f"])({contentText:this.currentCall.targetName+"正在呼叫...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){t.$store.commit("recordPhoneCall",Object(a["a"])(Object(a["a"])({},t.currentCall),{},{handled:!1})),Object(s["b"])(window.plus.getMac(),t.currentCall.channelId).then(t.endPhoneCall).catch((function(e){Object(s["e"])(e.message)}))}},{text:"接听",color:"#3E8CFC",callback:function(){t.phoneAnswer()}}]}))}break;case"CANCEL":this.currentCall.channelId?(console.log(n.data.channelId,this.currentCall.channelId),n.data.channelId===this.currentCall.channelId?(this.$inChannel||(this.currentCall.calledCode=""),this.endPhoneCall()):this.$store.commit("unhandledPhoneCall",n.data.channelId)):this.endPhoneCall();break;case"CALLBACK":switch(n.data.callStatus){case"2":this.$store.commit("stopSound"),this.$model&&this.$model.setOption({contentText:this.currentCall.targetName+"正在通话中...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){Object(s["b"])(window.plus.getMac(),t.currentCall.channelId).then(t.endPhoneCall).catch((function(e){Object(s["e"])(e.message)}))}}]});break;case"3":this.endPhoneCall(),Object(s["e"])("通话已结束");break;case"4":this.endPhoneCall(),Object(s["e"])(this.currentCall.targetName+"暂时无人接听。请稍后再试");break;case"7":this.endPhoneCall(),Object(s["e"])(this.currentCall.targetName+"正在通话中。请稍后再试");break;case"8":this.endPhoneCall();break}break}},phoneAnswer:function(){this.$inChannel||(this.$store.state.called=!0,window.plus.voice_call(this.currentCall.channelId),this.$store.commit("stopSound"),this.$store.commit("recordPhoneCall",Object(a["a"])(Object(a["a"])({},this.currentCall),{},{handled:!0})))},hangUp:function(){Object(s["b"])(window.plus.getMac(),this.currentCall.channelId).then(this.endPhoneCall).catch((function(e){Object(s["e"])(e.message)}))},endPhoneCall:function(){var e=this;this.$store.commit("hangup"),this.$inChannel=!1,window.plus.voice_end(),this.$store.commit("stopSound"),this.$model&&(this.noticeList.length>0?(this.$store.commit("handlePhoneCall"),this.$store.dispatch("playSound","/sound/ring.wav"),this.$model.close(),this.$model=Object(s["f"])({contentText:this.currentCall.targetName+"正在呼叫...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){Object(s["b"])(window.plus.getMac(),e.currentCall.channelId).then(e.endPhoneCall).catch((function(e){Object(s["e"])(e.message)}))}},{text:"接听",color:"#3E8CFC",callback:function(){e.phoneAnswer()}}]})):(this.$model.close(),this.$model=null))}}},d=r,u=(n("034f"),n("2877")),h=Object(u["a"])(d,l,i,!1,null,null,null),f=h.exports,m=n("82c5"),b=n("8c4f");o["a"].use(b["a"]);var p=[{path:"/",name:"首页",component:function(){return n.e("chunk-39396829").then(n.bind(null,"bb51"))},children:[{path:"/list",name:"一览",component:function(){return n.e("chunk-641ae183").then(n.bind(null,"26d4"))},redirect:"/list/beds",children:[{path:"beds",name:"患者一览",component:function(){return n.e("chunk-e013325c").then(n.bind(null,"2f48"))}},{path:"nurses",name:"护士一览",component:function(){return n.e("chunk-670cf2f4").then(n.bind(null,"34f7"))}},{path:"doctors",name:"医生一览",component:function(){return n.e("chunk-206d2629").then(n.bind(null,"7b4c"))}}]},{path:"/phonebook",name:"电话簿",component:function(){return n.e("chunk-ada79270").then(n.bind(null,"1ad6"))}},{path:"/bathCall",name:"卫浴呼叫",component:function(){return Promise.resolve().then(n.bind(null,"0058"))}},{path:"/office",name:"选择分区",component:function(){return Promise.resolve().then(n.bind(null,"82c5"))}}]}],g=new b["a"]({routes:p}),j=g,v=n("4360"),C=n("0058"),w=n("bc3a"),y=n.n(w),I=n("3a34"),k=n.n(I);o["a"].prototype.$eventBus=new o["a"],y.a.defaults.baseURL="http://192.90.111.30:8785/api/",y.a.interceptors.request.use((function(e){var t=e.data,n=Object(c["a"])(e,["data"]);return t instanceof FormData?(t.append("deviceCode",window.plus.getMac()),Object(a["a"])(Object(a["a"])({},n),{},{data:t})):Object(a["a"])(Object(a["a"])({},n),{},{data:Object(a["a"])(Object(a["a"])({},t),{},{deviceCode:window.plus.getMac()})})}),(function(e){return Promise.reject(e)})),j.beforeEach((function(e,t,n){"/office"===e.path||v["a"].state.bindInfo.name?n():n("/office")})),o["a"].prototype.axios=y.a;var A=new k.a;console.log(A),new o["a"]({router:j,store:v["a"],render:function(e){return"/bathcall"===this.$route.path?e(C["default"]):"/office"===this.$route.path?e(m["default"]):e(f)}}).$mount("#app")},"69f5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGvGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA3LTA5VDE0OjA1OjQ3KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0xMC0xNlQxMzo1MDozNiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0xMC0xNlQxMzo1MDozNiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNjUxZDZkYy0yZDIzLTc4NDEtOGJlYy0xYjgxODkwZTQwMjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MWY2YTkwN2QtOTY1ZC1hNzQ2LTkxZGQtODBmODc2NWY3Y2FmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MWY2YTkwN2QtOTY1ZC1hNzQ2LTkxZGQtODBmODc2NWY3Y2FmIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxZjZhOTA3ZC05NjVkLWE3NDYtOTFkZC04MGY4NzY1ZjdjYWYiIHN0RXZ0OndoZW49IjIwMTktMDctMDlUMTQ6MDU6NDcrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTg0NGRkZTItMDA0Ni1mMzQ5LWI1YmMtY2Q0YmQxMjUyYjlkIiBzdEV2dDp3aGVuPSIyMDE5LTA4LTEzVDE5OjAxOjE5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQ2NTFkNmRjLTJkMjMtNzg0MS04YmVjLTFiODE4OTBlNDAyMiIgc3RFdnQ6d2hlbj0iMjAxOS0xMC0xNlQxMzo1MDozNiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtzQRYAAAADnSURBVFiF7dfBDYJAEIXhH2MBlmAJlkAJlgAVLFZitoKNHdiBJUgrVoAHOBgTs2H2TeSw70RIIF8mO8PQTNPElrL7N+A7FZRLBeVSQbns1z4QYzoBV2AMob+oQZYKnYEWGGJMSarBBroDr+W6U6NWg0LoR+YKuaBMh9oTZe4yL1RR23ugiueQGiUZjEqUbFL/QA1/A32kaAVtVCvs8kl5AIfl1i2Evlv7HkmFVBgJSIkpBqkxRSAPjBnkhQFDl8WYjsDTAwO2CnVeGDCssMwLWsu8wg5KDAgHoyqb++uooFwqKJcKyuUNtBFs7V1j2REAAAAASUVORK5CYII="},"82c5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center",height:"100%"},attrs:{id:"con"}},[n("div",{staticClass:"top-bar",staticStyle:{width:"100%"}},[e._v(" 医护分机位置配置 "),n("span",{staticStyle:{right:"30px","line-height":"32px",position:"absolute",top:"19px"}},[e._v(e._s(e.$store.state.bindInfo.hospitalName+" "+e.$store.state.bindInfo.areaName+" "+e.$store.state.bindInfo.name))])]),n("div",{staticClass:"main-content",staticStyle:{postion:"relative","align-items":"center"}},[n("div",{staticStyle:{display:"flex",width:"840px","min-height":"720px","flex-wrap":"wrap","align-content":"flex-start"}},e._l(e.officeList,(function(t){return n("div",{key:t.officeId,class:["office-item",{selected:e.selectedOffice===t.officeId,disabled:"1"===t.isSelect}],on:{click:function(n){return e.handleSelect(t)}}},[e._v(e._s(t.officeName))])})),0),n("div",{staticClass:"office-btn",on:{click:e.handleBindOffice}},[e._v("保存设置")]),n("p",{staticStyle:{color:"#b2b2b2","font-size":"32px",margin:"20px 0 0 0"}},[e._v("点击相应按钮选择医护分机安装位置")])]),n("p",{staticStyle:{color:"#b2b2b2","font-size":"28px","margin-bottom":"40px"}},[e._v("NCMED--IP Version1.0.0")])])},c=[],o=(n("7db0"),n("ac1f"),n("5319"),n("5530")),l=n("fa7d"),i={data:function(){return{selectedOffice:0,officeList:[]}},mounted:function(){var e=this;this.axios.post("nursingStation/getOfficeList").then((function(t){1===t.data.code&&(e.officeList=t.data.data.officeList)}))},methods:{handleSelect:function(e){"0"===e.isSelect&&(this.selectedOffice=e.officeId)},handleBindOffice:function(){var e=this;this.axios.post("nursingStation/setOffice",{officeId:this.selectedOffice}).then((function(t){if(1===t.data.code){Object(l["e"])("位置保存成功！");var n=Object(o["a"])(Object(o["a"])({},e.$store.state.bindInfo),{},{name:e.officeList.find((function(t){return t.officeId===e.selectedOffice})).officeName});window.plus.saveSpStr("bindInfo",JSON.stringify(n)),e.$store.commit("bindOffice",n),e.$router.replace("/list/beds")}}))}}},s=i,r=(n("0c39"),n("2877")),d=Object(r["a"])(s,a,c,!1,null,"79e4f29f",null);t["default"]=d.exports},"85ec":function(e,t,n){},c286:function(e,t,n){},d8ba:function(e,t,n){},e716:function(e,t,n){"use strict";var a=n("d8ba"),c=n.n(a);c.a},f7bb:function(e,t){e.exports="data:image/gif;base64,R0lGODlhyADIAIABAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxYmZmZGM5ZC0yMjkxLWNmNGYtYmY3NC0yMTQ2ODZkNGIzMjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0RGMkIwNjJGQUM3MTFFOTk0MjE5OTIxOTdDQkUzNTEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0RGMkIwNjFGQUM3MTFFOTk0MjE5OTIxOTdDQkUzNTEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MWMzY2VhMGItMzg1ZC1mYTQyLWI4NzMtODhjODE1Njg1MGEyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFiZmZkYzlkLTIyOTEtY2Y0Zi1iZjc0LTIxNDY4NmQ0YjMyNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94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"},fa7d:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return b}));n("a15b");var a=n("5530"),c=n("b85c"),o=n("bc3a"),l=n.n(o),i=n("4360"),s="http://192.90.111.30:8787/";function r(e,t){var n=document.createElement("div");n.innerText=e,n.style.width="800px",n.style.position="fixed",n.style.borderRadius="30px",n.style.top="40%",n.style.left="50%",n.style.marginLeft="-400px",n.style.padding="30px",n.style.backgroundColor="black",n.style.color="white",n.style.opacity=0,n.style.fontSize="32px",n.style.textAlign="center",n.style.lineHeight="60px",n.style.wordBreak="break-word",n.style.zIndex=1008,n.style.transition="opacity 0.5s ease",document.body.appendChild(n);var a=setTimeout((function(){clearTimeout(a),n.style.opacity=.6;var e=setTimeout((function(){clearTimeout(e),n.style.opacity=0;var a=setTimeout((function(){clearTimeout(a),document.body.removeChild(n),t&&t()}),1e3)}),1e3)}),200)}function d(e){var t={title:"提示",contentText:"",buttons:[{}]},n={text:"确认",color:"#35BF00"},a=Object.assign(t,e),o=document.createElement("div");o.style.opacity=.4,o.style.width="100%",o.style.height="100%",o.style.backgroundColor="black",o.style.position="fixed",o.style.top=0,o.style.left=0,o.style.zIndex=999,document.body.appendChild(o);var l=document.createElement("div");l.style.width="765px",l.style.height="530px",l.style.position="fixed",l.style.borderRadius="30px",l.style.backgroundColor="white",l.style.top="50%",l.style.left="50%",l.style.marginLeft="-382.5px",l.style.marginTop="-265px",l.style.paddingTop="54px",l.style.fontSize="32px",l.style.boxSizing="border-box",l.style.textAlign="center",l.style.zIndex=1e3;var i=document.createElement("p");i.innerText=a.title,i.style.padding="0",i.style.margin="0 0 64px 0",i.style.fontSize="48px",l.appendChild(i);var s=document.createElement("p");s.innerText=a.contentText,s.style.padding="0",s.style.margin="0",s.style.fontSize="36px",l.appendChild(s);var r=document.createElement("div");r.style.width="420px",r.style.height="100px",r.style.fontSize="36px",r.style.position="absolute",r.style.left="50%",r.style.marginLeft="-210px",r.style.padding="0 -10px",r.style.bottom="92px",r.style.color="white",r.style.display="flex";var d,u=Object(c["a"])(a.buttons);try{for(u.s();!(d=u.n()).done;){var h=d.value,f=Object.assign(n,h),m=document.createElement("div");m.innerText=f.text,m.style.borderRadius="50px",m.style.lineHeight="100px",m.style.flex="auto",m.style.margin="0 10px",m.style.backgroundColor=f.color,m.onclick=f.callback,r.appendChild(m)}}catch(b){u.e(b)}finally{u.f()}return l.appendChild(r),document.body.appendChild(l),{setOption:function(e){var a=Object.assign(t,e);i.innerText=a.title,s.innerText=a.contentText;for(var o=r.childNodes,l=o.length-1;l>=0;l--)r.removeChild(o[l]);var d,u=Object(c["a"])(a.buttons);try{for(u.s();!(d=u.n()).done;){var h=d.value,f=Object.assign(n,h),m=document.createElement("div");m.innerText=f.text,m.style.borderRadius="50px",m.style.lineHeight="100px",m.style.flex="auto",m.style.margin="0 10px",m.style.backgroundColor=f.color,m.onclick=f.callback,r.appendChild(m)}}catch(b){u.e(b)}finally{u.f()}},close:function(){document.body.removeChild(l),document.body.removeChild(o)}}}function u(e){return l.a.post(s+"accurateCall/getChannel").then((function(t){if(1===t.data.code)return{deviceCode:e,channelId:t.data.data.channelId};throw new Error(t.data.msg)}),(function(){throw new Error("网络异常，请检查您的网络。")}))}function h(e,t){var n=this;return l.a.post(s+"accurateCall/contactCall",{callerCode:window.plus.getMac(),calledCode:e,channelId:t}).then((function(c){if(1===c.data.code)return window.plus.voice_toggleSpeaker(!0),{devCode:e,channelId:t};throw window.plus.voice_end(),e===i["a"].state.currentCall.calledCode&&i["a"].commit("hangup"),i["a"].state.noticeList.length>0&&(console.log("进来呢得经济",i["a"].state.noticeList),i["a"].commit("handlePhoneCall"),i["a"].dispatch("playSound","/sound/ring.wav"),n.$model=d({contentText:i["a"].state.currentCall.targetName+"正在呼叫...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){m(window.plus.getMac(),i["a"].state.currentCall.channelId).then((function(e){i["a"].commit("hangup"),n.$inChannel=!1,window.plus.voice_end(),i["a"].commit("stopSound"),n.$model&&(i["a"].state.noticeList.length>0?(i["a"].commit("handlePhoneCall"),i["a"].dispatch("playSound","/sound/ring.wav"),n.$model.close(),n.$model=d({contentText:i["a"].state.currentCall.targetName+"正在呼叫...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){m(window.plus.getMac(),i["a"].state.currentCall.channelId).then(f()).catch((function(e){r(e.message)}))}},{text:"接听",color:"#3E8CFC",callback:function(){console.log("333333333333333333"),n.$model&&(n.$model.close(),n.$model=null),i["a"].state.called=!0,window.plus.webSocket_sendMsg(JSON.stringify({code:"BACK",data:{calledCode:i["a"].state.currentCall.calledCode,callerCode:i["a"].state.currentCall.callerCode,channelId:i["a"].state.currentCall.channelId,callStatus:"2"}})),n.$model.setOption({contentText:i["a"].state.currentCall.targetName+"通话中...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){m(window.plus.getMac(),i["a"].state.currentCall.channelId).then(f()).catch((function(e){r(e.message)}))}}]}),window.plus.voice_call(i["a"].state.currentCall.channelId),n.$store.commit("stopSound"),n.$store.commit("recordPhoneCall",Object(a["a"])(Object(a["a"])({},i["a"].state.currentCall),{},{handled:!0}))}}]})):(n.$model.close(),n.$model=null))})).catch((function(e){r(e.message)}))}},{text:"接听",color:"#3E8CFC",callback:function(){i["a"].state.called=!0,console.log(n.$model,"000000000000000测试"),window.plus.webSocket_sendMsg(JSON.stringify({code:"BACK",data:{calledCode:i["a"].state.currentCall.calledCode,callerCode:i["a"].state.currentCall.callerCode,channelId:i["a"].state.currentCall.channelId,callStatus:"2"}})),console.log(n.$model,"测试1111"),n.$model.setOption({contentText:i["a"].state.currentCall.targetName+"通话中...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){m(window.plus.getMac(),i["a"].state.currentCall.channelId).then(f()).catch((function(e){r(e.message+"错误2")}))}}]}),window.plus.voice_call(i["a"].state.currentCall.channelId),n.$store.commit("stopSound"),n.$store.commit("recordPhoneCall",Object(a["a"])(Object(a["a"])({},i["a"].state.currentCall),{},{handled:!0}))}}]})),new Error(c.data.msg)}),(function(){throw window.plus.voice_end(),new Error("网络异常，请检查您的网络。")}))}function f(){var e=this;i["a"].commit("hangup"),this.$inChannel=!1,window.plus.voice_end(),i["a"].commit("stopSound"),this.$model&&(this.noticeList.length>0?(i["a"].commit("handlePhoneCall"),i["a"].dispatch("playSound","/sound/ring.wav"),this.$model.close(),this.$model=d({contentText:i["a"].state.currentCall.targetName+"正在呼叫...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){m(window.plus.getMac(),i["a"].state.currentCall.channelId).then(f()).catch((function(e){r(e.message)}))}},{text:"接听",color:"#3E8CFC",callback:function(){e.$inChannel||(console.log("1222222222222222"),e.$model&&(e.$model.close(),e.$model=null),i["a"].state.called=!0,window.plus.webSocket_sendMsg(JSON.stringify({code:"BACK",data:{calledCode:i["a"].state.currentCall.calledCode,callerCode:i["a"].state.currentCall.callerCode,channelId:i["a"].state.currentCall.channelId,callStatus:"2"}})),e.$model.setOption({contentText:i["a"].state.currentCall.targetName+"通话中...",buttons:[{text:"挂断",color:"#FE6238",callback:function(){m(window.plus.getMac(),i["a"].state.currentCall.channelId).then(f()).catch((function(e){r(e.message)}))}}]}),window.plus.voice_call(i["a"].state.currentCall.channelId),e.$store.commit("stopSound"),e.$store.commit("recordPhoneCall",Object(a["a"])(Object(a["a"])({},i["a"].state.currentCall),{},{handled:!0})))}}]})):(this.$model.close(),this.$model=null))}function m(e,t){var n=this;return l.a.post(s+"accurateCall/deviceExit",{deviceCode:e,channelId:t}).then((function(e){if(i["a"].commit("stopSound"),1!==e.data.code)throw n.$model?(n.$model.close(),n.$model=null):n.$model=null,new Error(e.data.msg);window.plus.voice_toggleSpeaker(!1)}),(function(){throw new Error("网络异常，请检查您的网络。")}))}function b(e){return l.a.post(s+"accurateCall/global/broadcast",{fileUrl:e,sendDeviceCode:i["a"].state.broadcastSelectedDevice.join(",")}).then((function(e){if(1===e.data.code)return e;throw new Error(e.msg)}),(function(){throw new Error("网络异常，请检查您的网络。")}))}}});
//# sourceMappingURL=app.e7868d4a.js.map